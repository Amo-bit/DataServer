<?xml version="1.0" encoding="UTF-8"?>
<!-- Установить уровень журнала log4j2 для предупреждения -->
<!-- Уровень журнала и порядок приоритета: ВЫКЛ.> FATAL> ERROR> WARN> INFO> DEBUG> TRACE> ALL -->
<!-- Статус за конфигурацией, он используется для установки внутреннего вывода информации самого log4j2, вам не нужно его устанавливать,
        При установке на трассировку вы увидите различный подробный вывод внутри log4j2 -->
<!-- monitorInterval: Log4j может автоматически обнаруживать и изменять файл конфигурации и перенастраивать себя, устанавливать интервал в секундах -->
<configuration status="info" monitorInterval="30">
<!-- Сначала определите все дополнения -->
<appenders>
    <!-- Конфигурация этой консоли вывода -->
    <console name="Console" target="SYSTEM_OUT">
        <!-- Формат вывода журнала -->
        <PatternLayout pattern="[%d{HH:mm:ss:SSS}] [%p] - %l - %m%n"/>
    </console>
    <!-- В файле будет распечатана вся информация. Этот журнал будет автоматически очищаться каждый раз
    при запуске программы. Он определяется атрибутом append. Это также очень полезно и подходит для временного тестирования -->
    <File name="log" fileName="log/test.log" append="false">
        <PatternLayout pattern="%d{HH:mm:ss.SSS} %-5level %class{36} %L %M - %msg%xEx%n"/>
    </File>
    <!-- Будет распечатана вся информация и информация ниже уровня каждый раз, когда размер превышает размер,
    Тогда журнал такого размера будет автоматически сохранен в папке, созданной по годам и месяцам, и сжат в виде архива -->
    <RollingFile name="RollingFileInfo" fileName="${sys:user.home}/logs/hpaasvc/info.log"
                 filePattern="${sys:user.home}/logs/hpaasvc/$${date:yyyy-MM}/info-%d{yyyy-MM-dd}-%i.log">
        <Filters>
            <!-- Консоль выводит информацию только уровня и выше (onMatch), другие напрямую отклоняют (onMismatch) -->
            <ThresholdFilter level="INFO" onMatch="ACCEPT" onMismatch="DENY"/>
            <ThresholdFilter level="WARN" onMatch="DENY" onMismatch="NEUTRAL"/>
        </Filters>
        <PatternLayout pattern="[%d{HH:mm:ss:SSS}] [%p] - %l - %m%n"/>
        <Policies>
            <TimeBasedTriggeringPolicy/>
            <SizeBasedTriggeringPolicy size="100 MB"/>
        </Policies>
    </RollingFile>

    <RollingFile name="RollingFileWarn" fileName="${sys:user.home}/logs/hpaasvc/warn.log"
                 filePattern="${sys:user.home}/logs/hpaasvc/$${date:yyyy-MM}/warn-%d{yyyy-MM-dd}-%i.log">
        <Filters>
            <ThresholdFilter level="WARN" onMatch="ACCEPT" onMismatch="DENY"/>
            <ThresholdFilter level="ERROR" onMatch="DENY" onMismatch="NEUTRAL"/>
        </Filters>
        <PatternLayout pattern="[%d{HH:mm:ss:SSS}] [%p] - %l - %m%n"/>
        <Policies>
            <TimeBasedTriggeringPolicy/>
            <SizeBasedTriggeringPolicy size="100 MB"/>
        </Policies>
        <!-- Если свойство DefaultRolloverStrategy не задано, по умолчанию используется до 7 файлов в одной папке, здесь установлено 20 -->
        <DefaultRolloverStrategy max="20"/>
    </RollingFile>

    <RollingFile name="RollingFileError" fileName="${sys:user.home}/logs/hpaasvc/error.log"
                 filePattern="${sys:user.home}/logs/hpaasvc/$${date:yyyy-MM}/error-%d{yyyy-MM-dd}-%i.log">
        <ThresholdFilter level="ERROR"/>
        <PatternLayout pattern="[%d{HH:mm:ss:SSS}] [%p] - %l - %m%n"/>
        <Policies>
            <TimeBasedTriggeringPolicy/>
            <SizeBasedTriggeringPolicy size="100 MB"/>
        </Policies>
    </RollingFile>

</appenders>
<!-- Затем определите регистратор, только приложение, которое было определено и введено, вступит в силу -->
<loggers>
    <!-- Отфильтровать бесполезную отладочную информацию о Spring и Hibernate -->
    <logger name="org.springframework" level="INFO">
    </logger>
    <logger name="org.mybatis" level="INFO">
    </logger>
    <root level="all">
        <appender-ref ref="Console"/>
        <!--<appender-ref ref="RollingFileInfo"/>-->
        <!--<appender-ref ref="RollingFileWarn"/>-->
        <!--<appender-ref ref="RollingFileError"/>-->
    </root>
</loggers>
</configuration>